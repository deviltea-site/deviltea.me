<!DOCTYPE html><html lang="zh-TW" class="dark" data-head-attrs="lang"><head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevilTea.me</title>
  <script type="module" async="" crossorigin="" src="/assets/app.ac586d75.js"></script>
  <link rel="modulepreload" href="/assets/vendor.f898a416.js">
  <link rel="stylesheet" href="/assets/app.dd4146b2.css">
<link rel="modulepreload" crossorigin="" href="/assets/Post.34f4d831.js"><meta name="description" content="Write something to record my life"><meta property="og:title" content="DevilTea.me"><meta property="og:description" content="Write something to record my life"><meta property="og:url" content="https://deviltea.me"><meta property="og:image" content="/assets/og.be90cc57.png"><meta property="og:type" content="website"><meta property="og:site_name" content="Maple Pod"><meta name="head:count" content="7"></head>
  <body>
    <div id="app" data-server-rendered="true"><!--[--><nav w:pos="fixed top-0 left-0" w:z="20" w:w="screen" w:h="16 xsOnly:12" w:flex="~" w:align="items-center"><div w:pos="absolute top-0 left-0 " w:z="-1" w:w="screen" w:h="16 xsOnly:12" w:bg="default-bg-light/60 dark:default-bg-dark/60" w:shadow="~" w:transition="~ duration-500" class="opacity-1"></div><!--[--><!--[--><a w:flex="~" w:align="items-center" w:p="x-3" w:font="extralight" w:text="3xl xsOnly:2xl" w:opacity="50" w:hover:opacity="100" w:transform="~ scale-90" w:hover:transform="scale-100" w:transition="~" href="/">Home</a><!--]--><!--[--><a w:flex="~" w:align="items-center" w:p="x-3" w:font="extralight" w:text="3xl xsOnly:2xl" w:opacity="50" w:hover:opacity="100" w:transform="~ scale-90" w:hover:transform="scale-100" w:transition="~" href="/posts">Posts</a><!--]--><!--]--><button w:m="l-auto r-0" w:p="2" w:flex="~" w:align="items-center" w:hover:bg="" w:focus="outline-none" w:text="3xl xsOnly:2xl"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg></button></nav><main id="Post:github-pages-cname-note"><!--[--><article w:p="x-6 y-16 xsOnly:x-4" w:m="x-auto y-4" w:w="max-50rem" w:overflow="hidden"><section w:transition="~"><h1 w:font="extralight leading-normal" w:text="4xl">設定 GitHub Pages 使用自訂 Domain</h1><div w:flex="~ wrap" w:align="items-end" w:opacity="50 hover:100" w:transition="~"><div w:m="r-4" w:flex="~" w:align="items-center"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" w:m="2"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5z" fill="currentColor"></path></svg><span w:p="x-1 y-0.5" w:m="1" w:border="b-1 current" w:opacity="70 hover:100" w:transition="~">2021 / 6 / 16</span></div><div w:flex="~ wrap" w:align="items-center"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" w:m="2"><path d="M5.5 7A1.5 1.5 0 0 1 4 5.5A1.5 1.5 0 0 1 5.5 4A1.5 1.5 0 0 1 7 5.5A1.5 1.5 0 0 1 5.5 7m15.91 4.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.11 0-2 .89-2 2v7c0 .55.22 1.05.59 1.41l8.99 9c.37.36.87.59 1.42.59c.55 0 1.05-.23 1.41-.59l7-7c.37-.36.59-.86.59-1.41c0-.56-.23-1.06-.59-1.42z" fill="currentColor"></path></svg><!--[--><a href="/posts?tag=%E5%85%B6%E4%BB%96" class="" w:p="x-1 y-0.5" w:m="1" w:border="b-1 current" w:opacity="70 hover:100" w:transition="~">其他</a><a href="/posts?tag=%E7%AD%86%E8%A8%98" class="" w:p="x-1 y-0.5" w:m="1" w:border="b-1 current" w:opacity="70 hover:100" w:transition="~">筆記</a><!--]--></div></div></section><hr w:m="y-4" w:opacity="80"><section class="markdown"><!--[--><h2 id="%E5%89%8D%E8%A8%80"><a class="header-anchor" href="#%E5%89%8D%E8%A8%80"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M22 15l-3-4l-3 4h1.906c-.436 2.469-2.438 4.471-4.906 4.906V13h2v-2h-2V9.336c1.543-.459 2.714-1.923 2.714-3.621C15.714 3.666 14.048 2 12 2S8.286 3.666 8.286 5.715c0 1.698 1.171 3.162 2.714 3.621V11H9v2h2v6.906C8.531 19.471 6.529 17.469 6.094 15H8l-3-4l-3 4h2.073c.511 3.885 3.929 7 7.927 7s7.416-3.115 7.927-7H22zM10.286 5.715C10.286 4.77 11.055 4 12 4s1.714.77 1.714 1.715c0 .951-.801 1.785-1.714 1.785s-1.714-.834-1.714-1.785z" fill="currentColor"></path></svg></a> 前言</h2><p>這篇的使用情況是 <a href="">Gandi</a> + <a href="">Cloudflare</a>，Gandi 為 DNS 服務商，Cloudflare 提供 CDN 以及 DNS 託管，使用以上去設定 GitHub Pages 使用自訂 Domain，記錄一些步驟以及踩到的雷</p><div class="warning"><p>此文撰寫時只針對個別 Repo 進行設定，GitHub Pages 的自訂 Domain 也可以針對 Organization / User 進行設定</p></div><h2 id="%E6%9C%AC%E6%96%87"><a class="header-anchor" href="#%E6%9C%AC%E6%96%87"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M22 15l-3-4l-3 4h1.906c-.436 2.469-2.438 4.471-4.906 4.906V13h2v-2h-2V9.336c1.543-.459 2.714-1.923 2.714-3.621C15.714 3.666 14.048 2 12 2S8.286 3.666 8.286 5.715c0 1.698 1.171 3.162 2.714 3.621V11H9v2h2v6.906C8.531 19.471 6.529 17.469 6.094 15H8l-3-4l-3 4h2.073c.511 3.885 3.929 7 7.927 7s7.416-3.115 7.927-7H22zM10.286 5.715C10.286 4.77 11.055 4 12 4s1.714.77 1.714 1.715c0 .951-.801 1.785-1.714 1.785s-1.714-.834-1.714-1.785z" fill="currentColor"></path></svg></a> 本文</h2><h3 id="%E5%89%8D%E7%BD%AE%E4%BD%9C%E6%A5%AD"><a class="header-anchor" href="#%E5%89%8D%E7%BD%AE%E4%BD%9C%E6%A5%AD"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M22 15l-3-4l-3 4h1.906c-.436 2.469-2.438 4.471-4.906 4.906V13h2v-2h-2V9.336c1.543-.459 2.714-1.923 2.714-3.621C15.714 3.666 14.048 2 12 2S8.286 3.666 8.286 5.715c0 1.698 1.171 3.162 2.714 3.621V11H9v2h2v6.906C8.531 19.471 6.529 17.469 6.094 15H8l-3-4l-3 4h2.073c.511 3.885 3.929 7 7.927 7s7.416-3.115 7.927-7H22zM10.286 5.715C10.286 4.77 11.055 4 12 4s1.714.77 1.714 1.715c0 .951-.801 1.785-1.714 1.785s-1.714-.834-1.714-1.785z" fill="currentColor"></path></svg></a> 前置作業</h3><ol><li>申辦及購買完成自己的 Domain (本文使用 Gandi)</li><li>申辦完成 Cloudflare 帳戶</li><li>新增持有的 Domain 到 Cloudflare</li><li>點擊新增網站<br><img src="/assets/github-pages-cname-note-0-1.9b49b21b.png" alt="點擊新增網站示意圖"></li><li>輸入你持有的 Domain<br><img src="/assets/github-pages-cname-note-0-2.c9bcf46e.png" alt="輸入你持有的 Domain 示意圖"></li></ol><h3 id="%E8%AE%93-cloudflare-%E6%8E%A5%E7%AE%A1-dns-%E6%9C%8D%E5%8B%99"><a class="header-anchor" href="#%E8%AE%93-cloudflare-%E6%8E%A5%E7%AE%A1-dns-%E6%9C%8D%E5%8B%99"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M22 15l-3-4l-3 4h1.906c-.436 2.469-2.438 4.471-4.906 4.906V13h2v-2h-2V9.336c1.543-.459 2.714-1.923 2.714-3.621C15.714 3.666 14.048 2 12 2S8.286 3.666 8.286 5.715c0 1.698 1.171 3.162 2.714 3.621V11H9v2h2v6.906C8.531 19.471 6.529 17.469 6.094 15H8l-3-4l-3 4h2.073c.511 3.885 3.929 7 7.927 7s7.416-3.115 7.927-7H22zM10.286 5.715C10.286 4.77 11.055 4 12 4s1.714.77 1.714 1.715c0 .951-.801 1.785-1.714 1.785s-1.714-.834-1.714-1.785z" fill="currentColor"></path></svg></a> 讓 Cloudflare 接管 DNS 服務</h3><ol><li>點擊 DNS 選項<br><img src="/assets/github-pages-cname-note-1.52324f4d.png" alt="點擊 DNS 選項示意圖"></li><li>看到 “Cloudflare 名稱伺服器”<br><img src="/assets/github-pages-cname-note-1.52324f4d.png" alt="看到 “Cloudflare 名稱伺服器” 示意圖"></li><li>到 Gandi 管理頁面，並移至 “名稱伺服器“ 分頁<br><img src="/assets/github-pages-cname-note-3.b9060542.png" alt="到 Gandi 管理頁面，並移至 “名稱伺服器“ 分頁示意圖"></li><li>將 “Cloudflare 名稱伺服器” 裡的值填寫到 “Gandi 管理頁面 名稱伺服器分頁“（完成後儲存）<br><img src="/assets/github-pages-cname-note-4.7e804a66.png" alt="將 “Cloudflare 名稱伺服器” 裡的值填寫到 “Gandi 管理頁面 名稱伺服器“ 分頁示意圖"></li></ol><div class="info"><p>至此我們已經讓 Cloudflare 去接管 DNS 相關的工作</p></div><h3 id="%E6%B7%BB%E5%8A%A0-dns-%E8%A8%98%E9%8C%84"><a class="header-anchor" href="#%E6%B7%BB%E5%8A%A0-dns-%E8%A8%98%E9%8C%84"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M22 15l-3-4l-3 4h1.906c-.436 2.469-2.438 4.471-4.906 4.906V13h2v-2h-2V9.336c1.543-.459 2.714-1.923 2.714-3.621C15.714 3.666 14.048 2 12 2S8.286 3.666 8.286 5.715c0 1.698 1.171 3.162 2.714 3.621V11H9v2h2v6.906C8.531 19.471 6.529 17.469 6.094 15H8l-3-4l-3 4h2.073c.511 3.885 3.929 7 7.927 7s7.416-3.115 7.927-7H22zM10.286 5.715C10.286 4.77 11.055 4 12 4s1.714.77 1.714 1.715c0 .951-.801 1.785-1.714 1.785s-1.714-.834-1.714-1.785z" fill="currentColor"></path></svg></a> 添加 DNS 記錄</h3><ol><li>來到 Cloudflare DNS 設定頁面點擊新增紀錄<br><img src="/assets/github-pages-cname-note-5.27e653f0.png" alt="來到 Cloudflare DNS 設定頁面點擊新增紀錄示意圖"></li><li>添加以下四筆記錄到你需要的自訂 Domain（名稱僅為範例請自行替換） <table><thead><tr><th>類型</th><th>名稱</th><th>IPv4 位址</th></tr></thead><tbody><tr><td>A</td><td><a href="http://imgp.deviltea.me" class="external-link" target="_blank" rel="noopener noreferrer">imgp.deviltea.me</a></td><td>185.199.108.153</td></tr><tr><td>A</td><td><a href="http://imgp.deviltea.me" class="external-link" target="_blank" rel="noopener noreferrer">imgp.deviltea.me</a></td><td>185.199.109.153</td></tr><tr><td>A</td><td><a href="http://imgp.deviltea.me" class="external-link" target="_blank" rel="noopener noreferrer">imgp.deviltea.me</a></td><td>185.199.110.153</td></tr><tr><td>A</td><td><a href="http://imgp.deviltea.me" class="external-link" target="_blank" rel="noopener noreferrer">imgp.deviltea.me</a></td><td>185.199.111.153</td></tr></tbody></table></li></ol><h3 id="%E8%A8%AD%E5%AE%9A-repo-%E7%9A%84-github-pages"><a class="header-anchor" href="#%E8%A8%AD%E5%AE%9A-repo-%E7%9A%84-github-pages"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M22 15l-3-4l-3 4h1.906c-.436 2.469-2.438 4.471-4.906 4.906V13h2v-2h-2V9.336c1.543-.459 2.714-1.923 2.714-3.621C15.714 3.666 14.048 2 12 2S8.286 3.666 8.286 5.715c0 1.698 1.171 3.162 2.714 3.621V11H9v2h2v6.906C8.531 19.471 6.529 17.469 6.094 15H8l-3-4l-3 4h2.073c.511 3.885 3.929 7 7.927 7s7.416-3.115 7.927-7H22zM10.286 5.715C10.286 4.77 11.055 4 12 4s1.714.77 1.714 1.715c0 .951-.801 1.785-1.714 1.785s-1.714-.834-1.714-1.785z" fill="currentColor"></path></svg></a> 設定 Repo 的 GitHub Pages</h3><ol start="3"><li>新增完後到 你的 GitHub Repo 的 Settings 中找到 Pages 選項進入該設定頁面<br><img src="/assets/github-pages-cname-note-6.c4c4a69a.png" alt="新增完後到 你的 GitHub Repo 的 Settings 中找到 Pages 選項進入該設定頁面示意圖"><ol><li>選擇要發佈到網路上的 branch</li><li>原先 GitHub Pages 會套用預設的設定，也就是會套用 <code>&lt;username&gt;.github.io/&lt;repo-name&gt;</code> 作為該 repo 的 entry point</li><li>在此填入要自訂用的 Domain<br><img src="/assets/github-pages-cname-note-7.fa7d615f.png" alt="在此填入要自訂用的 Domain 示意圖"></li><li>此時已經套用要自訂的 Domain<br><img src="/assets/github-pages-cname-note-8.ad78ee50.png" alt="此時已經套用要自訂的 Domain 示意圖"></li></ol></li></ol><h3 id="%E5%BC%B7%E5%88%B6%E4%BD%BF%E7%94%A8-https"><a class="header-anchor" href="#%E5%BC%B7%E5%88%B6%E4%BD%BF%E7%94%A8-https"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M22 15l-3-4l-3 4h1.906c-.436 2.469-2.438 4.471-4.906 4.906V13h2v-2h-2V9.336c1.543-.459 2.714-1.923 2.714-3.621C15.714 3.666 14.048 2 12 2S8.286 3.666 8.286 5.715c0 1.698 1.171 3.162 2.714 3.621V11H9v2h2v6.906C8.531 19.471 6.529 17.469 6.094 15H8l-3-4l-3 4h2.073c.511 3.885 3.929 7 7.927 7s7.416-3.115 7.927-7H22zM10.286 5.715C10.286 4.77 11.055 4 12 4s1.714.77 1.714 1.715c0 .951-.801 1.785-1.714 1.785s-1.714-.834-1.714-1.785z" fill="currentColor"></path></svg></a> 強制使用 HTTPS</h3><div class="info"><p>都 2021 年了，HTTPS 已經算是必備，所以我們也要 HTTPS！</p></div><p>不過在以上步驟完成後卻發現類似以下的訊息：<br><img src="/assets/github-pages-cname-note-9.65c5ea72.png" alt="HTTPS 無法開啟示意圖"></p><p>這裡要到 Cloudflare 控制頁面做一些處理：</p><ol><li>打開到 <code>SSL / TLS</code> 選項分頁，把 <code>完整（嚴格）</code> 勾起來<br><img src="/assets/github-pages-cname-note-10.fdf5c4d7.png" alt="HTTPS 無法開啟示意圖"></li><li>回到 DNS 頁面先把先前加入的 4 個 <code>A 紀錄</code> 的 Proxy <strong>暫時</strong>關閉<br><img src="/assets/github-pages-cname-note-11.8ae21d94.png" alt="回到 DNS 頁面先把先前加入的 4 個 A 紀錄 的 Proxy 暫時關閉示意圖"></li><li>稍微等待一段時間後回到 GitHub repo 的 Pages 設定頁面讓他再次自己檢查之後，就會發現底下的 <code>Enforce HTTPS</code> 已經可以勾起來了<br><img src="/assets/github-pages-cname-note-12.e06d788a.png" alt="底下的 ”Enforce HTTPS“ 已經可以勾起來了示意圖"></li><li>What R U waiting for? 勾起來就對ㄌ！</li><li>記得回去將這部分的步驟 2，把 DNS Proxy 開回去</li></ol><!--]--></section></article><!--]--></main><!--]--></div>

<script>window.__INITIAL_STATE__="{}"</script>
    
  

</body></html>